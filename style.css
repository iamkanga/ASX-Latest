/* File Version: v82 */
/* Last Updated: 2025-07-02 (Minor version bump for consistency with All Watchlists feature) */

:root {
    /* Light Theme (Default) */
    --background-color: #eef2f3;
    --text-color: #333;
    --header-bg: #d9e2f4;
    --card-bg: #ffffff;
    --border-color: #c9d2d4;
    --button-bg: #007bff;
    --button-text: #fff;
    --button-hover-bg: #0056b3;
    --input-bg: #fff;
    --input-border: #b0b8bb;
    --input-placeholder-color: #6c757d; /* Added for consistency */
    --modal-bg: rgba(0, 0, 0, 0.6);
    --modal-content-bg: #fff;
    --table-header-bg: #e6e9eb;
    --table-row-hover-bg: #f0f4f5;
    --asx-button-bg: #e2e8ea;
    --asx-button-hover-bg: #d0d7d9;
    --asx-button-text: #333;
    --asx-button-active-bg: #007bff;
    --asx-button-active-text: #fff;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --info-color: #17a2b8;
    --link-color: #007bff;
    --link-hover-color: #0056b3;
    --sidebar-bg: #f8f9fa;
    --sidebar-text: #333;
    --sidebar-border: #c9d2d4;
    --menu-button-bg: transparent; /* Changed for standalone look */
    --menu-button-hover-bg: #e9ecef; /* Lighter hover for standalone */
    --menu-button-active-bg: #007bff;
    --menu-button-active-text: #fff;
    --placeholder-text: #6c757d;
    --ghosted-text: #888;
    --danger-button-bg: #dc3545;
    --danger-button-hover-bg: #c82333;
    --secondary-button-bg: #6c757d;
    --secondary-button-hover-bg: #545b62;
    --google-auth-btn-bg: #dd4b39;
    --google-auth-btn-hover-bg: #c23321;
    --label-color: #555;
    --shadow-color: rgba(0, 0, 0, 0.15);
    --sidebar-width: 280px;
    --close-sidebar-btn-color: #666;
    --icon-action-color: #007bff; /* New variable for action icons */
    --icon-action-hover-color: #0056b3;
    --icon-danger-color: #dc3545; /* New variable for danger icons */
    --icon-danger-hover-color: #c82333;
    --calc-num-btn-bg: #f0f0f0; /* Default: Calculator number button background */
    --calc-num-btn-text: #333; /* Default: Calculator number button text */
    --calc-num-btn-hover-bg: #e0e0e0; /* Default: Calculator number button hover */
}

/* Dark Theme Variables */
body.dark-theme {
    --background-color: #2c3e50;
    --text-color: #ecf0f1;
    --header-bg: #34495e;
    --card-bg: #3b526b;
    --border-color: #4a627a;
    --button-bg: #007bff;
    --button-text: #fff;
    --button-hover-bg: #0056b3;
    --input-bg: #4a627a;
    --input-border: #6c8095;
    --input-placeholder-color: #bdc3c7; /* Added for consistency */
    --modal-bg: rgba(0, 0, 0, 0.75);
    --modal-content-bg: #34495e;
    --table-header-bg: #4a627a;
    --table-row-hover-bg: #4a627a;
    --asx-button-bg: #4a627a;
    --asx-button-hover-bg: #5c758e;
    --asx-button-text: #ecf0f1;
    --asx-button-active-bg: #007bff;
    --asx-button-active-text: #fff;
    --success-color: #2ecc71;
    --danger-color: #e74c3c;
    --warning-color: #f39c12;
    --info-color: #3498db;
    --link-color: #3498db;
    --link-hover-color: #2980b9;
    --sidebar-bg: #34495e;
    --sidebar-text: #ecf0f1;
    --sidebar-border: #4a627a;
    --menu-button-bg: transparent; /* Changed for standalone look */
    --menu-button-hover-bg: #4a627a; /* Lighter hover for standalone */
    --menu-button-active-bg: #007bff;
    --menu-button-active-text: #fff;
    --placeholder-text: #bdc3c7;
    --ghosted-text: #95a5a6;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --secondary-button-bg: #7f8c8d;
    --secondary-button-hover-bg: #616e70;
    --google-auth-btn-bg: #e74c3c;
    --google-auth-btn-hover-bg: #c0392b;
    --label-color: #bbb;
    --shadow-color: rgba(0, 0, 0, 0.4);
    --close-sidebar-btn-color: #bbb;
    --icon-action-color: #3498db; /* Dark theme action icon color */
    --icon-action-hover-color: #2980b9;
    --icon-danger-color: #e74c3c; /* Dark theme danger icon color */
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #5a758e; /* Dark: Calculator number button background */
    --calc-num-btn-text: #ecf0f1; /* Dark: Calculator number button text */
    --calc-num-btn-hover-bg: #6c8095; /* Dark: Calculator number button hover */
}

/* Custom Themes */
/* Bold Themes */
body.theme-bold-1 { /* Ocean Blue */
    --background-color: #1a2a3a;
    --text-color: #e0f2f7;
    --header-bg: #005f73;
    --card-bg: #0a475a;
    --border-color: #008793;
    --button-bg: #00b4d8;
    --button-hover-bg: #0096c7;
    --input-bg: #0a475a;
    --input-border: #008793;
    --input-placeholder-color: #8ecae6;
    --modal-content-bg: #0a475a;
    --table-header-bg: #005f73;
    --table-row-hover-bg: #008793;
    --asx-button-bg: #005f73;
    --asx-button-hover-bg: #008793;
    --asx-button-active-bg: #00b4d8;
    --sidebar-bg: #0a475a;
    --sidebar-border: #008793;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #0a475a;
    --placeholder-text: #8ecae6;
    --ghosted-text: #a8dadc;
    --danger-button-bg: #e63946;
    --danger-button-hover-bg: #c02d38;
    --icon-action-color: #00b4d8;
    --icon-action-hover-color: #0096c7;
    --icon-danger-color: #e63946;
    --icon-danger-hover-color: #c02d38;
    --calc-num-btn-bg: #007f8c;
    --calc-num-btn-text: #e0f2f7;
    --calc-num-btn-hover-bg: #0096c7;
}

body.theme-bold-2 { /* Forest Green */
    --background-color: #2d422d;
    --text-color: #e6ffe6;
    --header-bg: #386641;
    --card-bg: #4a754a;
    --border-color: #6a9955;
    --button-bg: #a7c957;
    --button-hover-bg: #8ba84a;
    --input-bg: #4a754a;
    --input-border: #6a9955;
    --input-placeholder-color: #c0d8b6;
    --modal-content-bg: #4a754a;
    --table-header-bg: #386641;
    --table-row-hover-bg: #6a9955;
    --asx-button-bg: #386641;
    --asx-button-hover-bg: #6a9955;
    --asx-button-active-bg: #a7c957;
    --sidebar-bg: #4a754a;
    --sidebar-border: #6a9955;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #4a754a;
    --placeholder-text: #c0d8b6;
    --ghosted-text: #d4e3c9;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #a7c957;
    --icon-action-hover-color: #8ba84a;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #5a855a;
    --calc-num-btn-text: #e6ffe6;
    --calc-num-btn-hover-bg: #6a9955;
}

body.theme-bold-3 { /* Sunset Orange */
    --background-color: #3b2a20;
    --text-color: #fff8e1;
    --header-bg: #e63946;
    --card-bg: #f4a261;
    --border-color: #e76f51;
    --button-bg: #ffc300;
    --button-hover-bg: #e0ac00;
    --input-bg: #f4a261;
    --input-border: #e76f51;
    --input-placeholder-color: #ffe5b4;
    --modal-content-bg: #f4a261;
    --table-header-bg: #e63946;
    --table-row-hover-bg: #e76f51;
    --asx-button-bg: #e63946;
    --asx-button-hover-bg: #e76f51;
    --asx-button-active-bg: #ffc300;
    --sidebar-bg: #f4a261;
    --sidebar-border: #e76f51;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f4a261;
    --placeholder-text: #ffe5b4;
    --ghosted-text: #ffeedd;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #ffc300;
    --icon-action-hover-color: #e0ac00;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #c2593b;
    --calc-num-btn-text: #fff8e1;
    --calc-num-btn-hover-bg: #e76f51;
}

body.theme-bold-4 { /* Royal Purple */
    --background-color: #2f254b;
    --text-color: #e6e0ff;
    --header-bg: #4a2d73;
    --card-bg: #6a4c93;
    --border-color: #8c73b0;
    --button-bg: #b388ff;
    --button-hover-bg: #9b6bd4;
    --input-bg: #6a4c93;
    --input-border: #8c73b0;
    --input-placeholder-color: #c7b3e6;
    --modal-content-bg: #6a4c93;
    --table-header-bg: #4a2d73;
    --table-row-hover-bg: #8c73b0;
    --asx-button-bg: #4a2d73;
    --asx-button-hover-bg: #8c73b0;
    --asx-button-active-bg: #b388ff;
    --sidebar-bg: #6a4c93;
    --sidebar-border: #8c73b0;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #6a4c93;
    --placeholder-text: #c7b3e6;
    --ghosted-text: #d4c4f0;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #b388ff;
    --icon-action-hover-color: #9b6bd4;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #7f68a0;
    --calc-num-btn-text: #e6e0ff;
    --calc-num-btn-hover-bg: #8c73b0;
}

body.theme-bold-5 { /* Golden Yellow */
    --background-color: #3b331f;
    --text-color: #fffacd;
    --header-bg: #b8860b;
    --card-bg: #daa520;
    --border-color: #ffd700;
    --button-bg: #ffeb3b;
    --button-hover-bg: #fdd835;
    --input-bg: #daa520;
    --input-border: #ffd700;
    --input-placeholder-color: #ffee99;
    --modal-content-bg: #daa520;
    --table-header-bg: #b8860b;
    --table-row-hover-bg: #ffd700;
    --asx-button-bg: #b8860b;
    --asx-button-hover-bg: #ffd700;
    --asx-button-active-bg: #ffeb3b;
    --sidebar-bg: #daa520;
    --sidebar-border: #ffd700;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #daa520;
    --placeholder-text: #ffee99;
    --ghosted-text: #fff2c4;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #ffeb3b;
    --icon-action-hover-color: #fdd835;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #9a831e;
    --calc-num-btn-text: #fffacd;
    --calc-num-btn-hover-bg: #ffd700;
}

body.theme-bold-6 { /* Deep Teal */
    --background-color: #1a3236;
    --text-color: #e0fafa;
    --header-bg: #004d40;
    --card-bg: #00695c;
    --border-color: #00897b;
    --button-bg: #26a69a;
    --button-hover-bg: #00897b;
    --input-bg: #00695c;
    --input-border: #00897b;
    --input-placeholder-color: #80cbc4;
    --modal-content-bg: #00695c;
    --table-header-bg: #004d40;
    --table-row-hover-bg: #00897b;
    --asx-button-bg: #004d40;
    --asx-button-hover-bg: #00897b;
    --asx-button-active-bg: #26a69a;
    --sidebar-bg: #00695c;
    --sidebar-border: #00897b;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #00695c;
    --placeholder-text: #80cbc4;
    --ghosted-text: #a7ffeb;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #26a69a;
    --icon-action-hover-color: #00897b;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #00796b;
    --calc-num-btn-text: #e0fafa;
    --calc-num-btn-hover-bg: #00897b;
}

body.theme-bold-7 { /* Firebrick Red */
    --background-color: #4a1c1c;
    --text-color: #ffebe6;
    --header-bg: #8b0000;
    --card-bg: #a52a2a;
    --border-color: #cd5c5c;
    --button-bg: #dc143c;
    --button-hover-bg: #b2002f;
    --input-bg: #a52a2a;
    --input-border: #cd5c5c;
    --input-placeholder-color: #ff9999;
    --modal-content-bg: #a52a2a;
    --table-header-bg: #8b0000;
    --table-row-hover-bg: #cd5c5c;
    --asx-button-bg: #8b0000;
    --asx-button-hover-bg: #cd5c5c;
    --asx-button-active-bg: #dc143c;
    --sidebar-bg: #a52a2a;
    --sidebar-border: #cd5c5c;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #a52a2a;
    --placeholder-text: #ff9999;
    --ghosted-text: #ffccd4;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #dc143c;
    --icon-action-hover-color: #b2002f;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #a52a2a;
    --calc-num-btn-text: #ffebe6;
    --calc-num-btn-hover-bg: #cd5c5c;
}

body.theme-bold-8 { /* Midnight Blue */
    --background-color: #1a1a2e;
    --text-color: #e0e0ff;
    --header-bg: #16213e;
    --card-bg: #0f3460;
    --border-color: #533483;
    --button-bg: #e94560;
    --button-hover-bg: #c22f47;
    --input-bg: #0f3460;
    --input-border: #533483;
    --input-placeholder-color: #92b8ea;
    --modal-content-bg: #0f3460;
    --table-header-bg: #16213e;
    --table-row-hover-bg: #533483;
    --asx-button-bg: #16213e;
    --asx-button-hover-bg: #533483;
    --asx-button-active-bg: #e94560;
    --sidebar-bg: #0f3460;
    --sidebar-border: #533483;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #0f3460;
    --placeholder-text: #92b8ea;
    --ghosted-text: #c0d8f7;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #e94560;
    --icon-action-hover-color: #c22f47;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #2e4a7a;
    --calc-num-btn-text: #e0e0ff;
    --calc-num-btn-hover-bg: #533483;
}

body.theme-bold-9 { /* Vibrant Green */
    --background-color: #213c21;
    --text-color: #e6ffe6;
    --header-bg: #388e3c;
    --card-bg: #4caf50;
    --border-color: #8bc34a;
    --button-bg: #cddc39;
    --button-hover-bg: #afb42b;
    --input-bg: #4caf50;
    --input-border: #8bc34a;
    --input-placeholder-color: #d1e78f;
    --modal-content-bg: #4caf50;
    --table-header-bg: #388e3c;
    --table-row-hover-bg: #8bc34a;
    --asx-button-bg: #388e3c;
    --asx-button-hover-bg: #8bc34a;
    --asx-button-active-bg: #cddc39;
    --sidebar-bg: #4caf50;
    --sidebar-border: #8bc34a;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #4caf50;
    --placeholder-text: #d1e78f;
    --ghosted-text: #e5f2b2;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #cddc39;
    --icon-action-hover-color: #afb42b;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #5a8b5a;
    --calc-num-btn-text: #e6ffe6;
    --calc-num-btn-hover-bg: #8bc34a;
}

body.theme-bold-10 { /* Sky Blue */
    --background-color: #1f324a;
    --text-color: #e0f2ff;
    --header-bg: #2196f3;
    --card-bg: #42a5f5;
    --border-color: #64b5f6;
    --button-bg: #90caf9;
    --button-hover-bg: #64b5f6;
    --input-bg: #42a5f5;
    --input-border: #64b5f6;
    --input-placeholder-color: #bbdefb;
    --modal-content-bg: #42a5f5;
    --table-header-bg: #2196f3;
    --table-row-hover-bg: #64b5f6;
    --asx-button-bg: #2196f3;
    --asx-button-hover-bg: #64b5f6;
    --asx-button-active-bg: #90caf9;
    --sidebar-bg: #42a5f5;
    --sidebar-border: #64b5f6;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #42a5f5;
    --placeholder-text: #bbdefb;
    --ghosted-text: #e3f2fd;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #90caf9;
    --icon-action-hover-color: #64b5f6;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #5a8b5a; /* Placeholder, consider specific for blue themes */
    --calc-num-btn-text: #e0f2ff;
    --calc-num-btn-hover-bg: #64b5f6;
}

/* Subtle Themes */
body.theme-subtle-1 { /* Subtle Blue Gray */
    --background-color: #f0f4f7;
    --text-color: #3f5567;
    --header-bg: #c9dbe7;
    --card-bg: #ffffff;
    --border-color: #e0e9ef;
    --button-bg: #87ceeb;
    --button-hover-bg: #6cb3d4;
    --input-bg: #ffffff;
    --input-border: #d2dae3;
    --input-placeholder-color: #9bbcd6;
    --modal-content-bg: #ffffff;
    --table-header-bg: #d7e2ea;
    --table-row-hover-bg: #eef4f7;
    --asx-button-bg: #e0eaf0;
    --asx-button-hover-bg: #c0e0ec;
    --asx-button-active-bg: #87ceeb;
    --sidebar-bg: #f8fcff;
    --sidebar-border: #c9e6f2;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #eaf7fc;
    --placeholder-text: #9bbcd6;
    --ghosted-text: #b0c6d9;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #87ceeb;
    --icon-action-hover-color: #6cb3d4;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #d0eaf5;
    --calc-num-btn-text: #334455;
    --calc-num-btn-hover-bg: #87ceeb;
}

body.theme-subtle-2 { /* Subtle Earth */
    --background-color: #f7f3ed;
    --text-color: #5c4f42;
    --header-bg: #d4c7b8;
    --card-bg: #ffffff;
    --border-color: #e8e0d4;
    --button-bg: #a67c52;
    --button-hover-bg: #8c6a46;
    --input-bg: #ffffff;
    --input-border: #dcd4c8;
    --input-placeholder-color: #a4917a;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e0d7cd;
    --table-row-hover-bg: #f2ede6;
    --asx-button-bg: #e6dcd1;
    --asx-button-hover-bg: #d0c4b6;
    --asx-button-active-bg: #a67c52;
    --sidebar-bg: #fcfaf8;
    --sidebar-border: #d4c7b8;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f5f2ed;
    --placeholder-text: #a4917a;
    --ghosted-text: #b6a793;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #a67c52;
    --icon-action-hover-color: #8c6a46;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e9e0d6;
    --calc-num-btn-text: #5c4f42;
    --calc-num-btn-hover-bg: #a67c52;
}

body.theme-subtle-3 { /* Subtle Mint */
    --background-color: #eef7f4;
    --text-color: #3b6058;
    --header-bg: #c2e0d9;
    --card-bg: #ffffff;
    --border-color: #d6ede5;
    --button-bg: #7dc9bf;
    --button-hover-bg: #63ada3;
    --input-bg: #ffffff;
    --input-border: #cbe0da;
    --input-placeholder-color: #9ac2bb;
    --modal-content-bg: #ffffff;
    --table-header-bg: #cfe3dc;
    --table-row-hover-bg: #e4f0ec;
    --asx-button-bg: #d7e8e3;
    --asx-button-hover-bg: #bfd9d2;
    --asx-button-active-bg: #7dc9bf;
    --sidebar-bg: #f9fdfb;
    --sidebar-border: #c2e0d9;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #e6f1ef;
    --placeholder-text: #9ac2bb;
    --ghosted-text: #a9cdc5;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #7dc9bf;
    --icon-action-hover-color: #63ada3;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e1ede8;
    --calc-num-btn-text: #3b6058;
    --calc-num-btn-hover-bg: #7dc9bf;
}

body.theme-subtle-4 { /* Subtle Lavender */
    --background-color: #f5f0f8;
    --text-color: #5c426a;
    --header-bg: #d0c2e0;
    --card-bg: #ffffff;
    --border-color: #e3d9ec;
    --button-bg: #a27cbd;
    --button-hover-bg: #8b69a6;
    --input-bg: #ffffff;
    --input-border: #d8cde5;
    --input-placeholder-color: #b091c9;
    --modal-content-bg: #ffffff;
    --table-header-bg: #dbd2e5;
    --table-row-hover-bg: #ece7f0;
    --asx-button-bg: #e0d7e8;
    --asx-button-hover-bg: #d0c2e0;
    --asx-button-active-bg: #a27cbd;
    --sidebar-bg: #faf7fc;
    --sidebar-border: #d0c2e0;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #edebf1;
    --placeholder-text: #b091c9;
    --ghosted-text: #c0aecf;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #a27cbd;
    --icon-action-hover-color: #8b69a6;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e7e0ed;
    --calc-num-btn-text: #5c426a;
    --calc-num-btn-hover-bg: #a27cbd;
}

body.theme-subtle-5 { /* Subtle Peach */
    --background-color: #fcf0eb;
    --text-color: #7a4f41;
    --header-bg: #f5c7b8;
    --card-bg: #ffffff;
    --border-color: #fae0d6;
    --button-bg: #eb8c72;
    --button-hover-bg: #d47a61;
    --input-bg: #ffffff;
    --input-border: #f2d4cc;
    --input-placeholder-color: #d6a495;
    --modal-content-bg: #ffffff;
    --table-header-bg: #fae0d6;
    --table-row-hover-bg: #fcebe4;
    --asx-button-bg: #fae4dc;
    --asx-button-hover-bg: #f7d2c4;
    --asx-button-active-bg: #eb8c72;
    --sidebar-bg: #fffcfb;
    --sidebar-border: #f5c7b8;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #fcf0eb;
    --placeholder-text: #d6a495;
    --ghosted-text: #e0bfae;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #eb8c72;
    --icon-action-hover-color: #d47a61;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #fae0d6;
    --calc-num-btn-text: #7a4f41;
    --calc-num-btn-hover-bg: #eb8c72;
}

body.theme-subtle-6 { /* Subtle Rose */
    --background-color: #f7eef2;
    --text-color: #6a4a5a;
    --header-bg: #e0c9d4;
    --card-bg: #ffffff;
    --border-color: #ede0e5;
    --button-bg: #c97d9e;
    --button-hover-bg: #b36382;
    --input-bg: #ffffff;
    --input-border: #e0d0d6;
    --input-placeholder-color: #bf9ab0;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e5d7df;
    --table-row-hover-bg: #f2e9ee;
    --asx-button-bg: #e8dee3;
    --asx-button-hover-bg: #d9c7cd;
    --asx-button-active-bg: #c97d9e;
    --sidebar-bg: #fcf8fa;
    --sidebar-border: #e0c9d4;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f2eef2;
    --placeholder-text: #bf9ab0;
    --ghosted-text: #ccb9c4;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #c97d9e;
    --icon-action-hover-color: #b36382;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #f2ebe6;
    --calc-num-btn-text: #6a5a4a;
    --calc-num-btn-hover-bg: #eeb8a2;
}

body.theme-subtle-7 { /* Subtle Graphite */
    --background-color: #f5f5f5;
    --text-color: #4a4a4a;
    --header-bg: #e0e0e0;
    --card-bg: #ffffff;
    --border-color: #d0d0d0;
    --button-bg: #b8b8b8;
    --button-hover-bg: #a2a2a2;
    --input-bg: #ffffff;
    --input-border: #c9c9c9;
    --input-placeholder-color: #8c8c8c;
    --modal-content-bg: #ffffff;
    --table-header-bg: #ebebeb;
    --table-row-hover-bg: #f0f0f0;
    --asx-button-bg: #e6e6e6;
    --asx-button-hover-bg: #d4d4d4;
    --asx-button-active-bg: #b8b8b8;
    --sidebar-bg: #fafafa;
    --sidebar-border: #e0e0e0;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f2f2f2;
    --placeholder-text: #8c8c8c;
    --ghosted-text: #a8a8a8;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #b8b8b8;
    --icon-action-hover-color: #a2a2a2;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e6e6e6;
    --calc-num-btn-text: #4a4a4a;
    --calc-num-btn-hover-bg: #b8b8b8;
}

body.theme-subtle-8 { /* Subtle Beige */
    --background-color: #fcf8f0;
    --text-color: #73624e;
    --header-bg: #e0d5c9;
    --card-bg: #ffffff;
    --border-color: #ede5da;
    --button-bg: #c9ac89;
    --button-hover-bg: #b39473;
    --input-bg: #ffffff;
    --input-border: #d4c9bc;
    --input-placeholder-color: #b3a492;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e5dcd2;
    --table-row-hover-bg: #f2eede;
    --asx-button-bg: #e8e0d5;
    --asx-button-hover-bg: #d9d0c4;
    --asx-button-active-bg: #c9ac89;
    --sidebar-bg: #fcf8fa;
    --sidebar-border: #e0d5c9;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f2f0e8;
    --placeholder-text: #b3a492;
    --ghosted-text: #c0b9a8;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #c9ac89;
    --icon-action-hover-color: #b39473;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #ede6dd;
    --calc-num-btn-text: #73624e;
    --calc-num-btn-hover-bg: #c9ac89;
}

body.theme-subtle-9 { /* Subtle Olive */
    --background-color: #f7f9f2;
    --text-color: #5c6a4a;
    --header-bg: #d0d6c2;
    --card-bg: #ffffff;
    --border-color: #e3e8d9;
    --button-bg: #a6b87d;
    --button-hover-bg: #8b9f69;
    --input-bg: #ffffff;
    --input-border: #d8e0c9;
    --input-placeholder-color: #b0c991;
    --modal-content-bg: #ffffff;
    --table-header-bg: #dbe0d1;
    --table-row-hover-bg: #f0f2eb;
    --asx-button-bg: #e0e4d7;
    --asx-button-hover-bg: #d0d4c4;
    --asx-button-active-bg: #a6b87d;
    --sidebar-bg: #fbfcf8;
    --sidebar-border: #d0d6c2;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #f2f5ed;
    --placeholder-text: #b0c991;
    --ghosted-text: #c0d4a8;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #a6b87d;
    --icon-action-hover-color: #8b9f69;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e7eadf;
    --calc-num-btn-text: #5c6a4a;
    --calc-num-btn-hover-bg: #a6b87d;
}

body.theme-subtle-10 { /* Subtle Plum */
    --background-color: #f5f0f2;
    --text-color: #6a4a5c;
    --header-bg: #d0c2e0;
    --card-bg: #ffffff;
    --border-color: #e3d9ec;
    --button-bg: #a27cbd;
    --button-hover-bg: #8b69a6;
    --input-bg: #ffffff;
    --input-border: #d8cde5;
    --input-placeholder-color: #b091c9;
    --modal-content-bg: #ffffff;
    --table-header-bg: #dbd2e5;
    --table-row-hover-bg: #ece7f0;
    --asx-button-bg: #e0d7e8;
    --asx-button-hover-bg: #d0c2e0;
    --asx-button-active-bg: #a27cbd;
    --sidebar-bg: #faf7fc;
    --sidebar-border: #d0c2e0;
    --menu-button-bg: transparent;
    --menu-button-hover-bg: #edebf1;
    --placeholder-text: #b091c9;
    --ghosted-text: #c0aecf;
    --danger-button-bg: #e74c3c;
    --danger-button-hover-bg: #c0392b;
    --icon-action-color: #a27cbd;
    --icon-action-hover-color: #8b69a6;
    --icon-danger-color: #e74c3c;
    --icon-danger-hover-color: #c0392b;
    --calc-num-btn-bg: #e7e0ed;
    --calc-num-btn-text: #6a4a5c;
    --calc-num-btn-hover-bg: #a27cbd;
}


/* General Body and Layout */
body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--background-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden; /* Prevent horizontal scroll due to sidebar animation */
}

/* Header */
header {
    background-color: var(--header-bg);
    color: var(--header-text-color); /* Use a specific header text color if different */
    padding: 10px 0;
    box-shadow: 0 2px 4px var(--shadow-color);
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 100;
    box-sizing: border-box; /* Include padding in width */
}

.header-top-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    position: relative; /* For absolute positioning of buttons */
    width: 100%;
    box-sizing: border-box; /* Ensure padding is included */
    padding: 0 15px; /* Add horizontal padding */
}

h1#mainTitle {
    margin: 0;
    font-size: 1.8em;
    font-weight: 700;
    color: var(--text-color);
    text-align: center;
    flex-grow: 1; /* Allow title to take available space */
}

.header-action-btn {
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.8em;
    cursor: pointer;
    position: absolute; /* Position absolutely within header-top-row */
    top: 50%;
    transform: translateY(-50%);
    padding: 5px; /* Add padding for clickable area */
}

.header-action-btn-left {
    left: 15px; /* Align to the left */
}

.header-action-btn-right {
    right: 15px; /* Align to the right */
}

/* Sidebar */
.app-sidebar {
    height: 100%;
    width: var(--sidebar-width);
    position: fixed;
    z-index: 200; /* Higher than header */
    top: 0;
    left: -280px; /* Hidden by default */
    background-color: var(--sidebar-bg);
    overflow-x: hidden;
    transition: left 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    padding-top: 60px; /* Space for close button */
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); /* Shadow when open */
    border-right: 1px solid var(--sidebar-border);
    display: flex;
    flex-direction: column;
}

body.sidebar-active .app-sidebar {
    left: 0; /* Show sidebar */
}

.close-menu-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 1.8em;
    cursor: pointer;
    background: none;
    border: none;
    color: var(--close-sidebar-btn-color);
}

.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: 150; /* Between header and sidebar */
    display: none; /* Hidden by default */
}

body.sidebar-active .sidebar-overlay {
    display: block;
}

.menu-section {
    padding: 15px 20px;
    border-bottom: 1px solid var(--sidebar-border);
}

.menu-section:last-of-type {
    border-bottom: none;
}

.menu-section h3 {
    color: var(--sidebar-text);
    font-size: 0.9em;
    margin-top: 0;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.7;
}

.menu-buttons-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.menu-button-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    border: none;
    border-radius: 8px;
    background-color: var(--menu-button-bg);
    color: var(--sidebar-text);
    font-size: 1.05em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease, color 0.2s ease;
    text-align: left; /* Ensure text aligns left */
    width: 100%; /* Take full width of its container */
    box-sizing: border-box; /* Include padding in width */
}

.menu-button-item:hover:not([disabled]) {
    background-color: var(--menu-button-hover-bg);
    transform: translateY(-2px);
}

.menu-button-item:active:not([disabled]) {
    transform: translateY(0);
}

.menu-button-item i {
    font-size: 1.2em;
    color: var(--icon-action-color); /* Icons use action color by default */
    transition: color 0.2s ease;
}

/* Logout button specifically */
#logoutBtn i.fas.fa-sign-out-alt {
    color: var(--icon-danger-color); /* Use danger color for logout icon */
}

.menu-button-item:hover:not([disabled]) #logoutBtn i.fas.fa-sign-out-alt {
    color: var(--icon-danger-hover-color);
}

/* Style for disabled menu items */
.menu-button-item[disabled] {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: var(--menu-button-bg); /* Keep original background on disabled */
    transform: none; /* No hover/active transform when disabled */
}

.menu-button-item[disabled] i {
    color: var(--ghosted-text); /* Ghost out icons when disabled */
}

/* Icon-only menu items */
.menu-button-item.icon-only {
    justify-content: center; /* Center the icon */
    padding: 8px; /* Reduce padding for a tighter fit */
    width: auto; /* Allow content to dictate width */
    min-width: 48px; /* Provide a minimum clickable area */
    max-width: 60px; /* Prevent it from becoming too wide */
    background: none; /* Explicitly remove background */
    border: 1px solid transparent; /* Transparent border to maintain size on hover */
    box-shadow: none; /* Remove any shadow */
}

.menu-button-item.icon-only:hover:not([disabled]) {
    background-color: var(--menu-button-hover-bg); /* Still show hover background */
    border-color: var(--border-color); /* Optional: add subtle border on hover */
}

.menu-button-item.icon-only i {
    font-size: 1.5em; /* Larger icon for icon-only buttons */
    margin: 0; /* Remove gap if only icon */
}

.menu-button-item.icon-only span {
    display: none; /* Hide text for icon-only */
}

/* Special case for revert to default theme button with two icons */
#revertToDefaultThemeBtn.menu-button-item.icon-only {
    display: flex;
    gap: 0; /* No gap between two icons */
    justify-content: center;
}

#revertToDefaultThemeBtn.menu-button-item.icon-only i {
    font-size: 1.5em;
    margin: 0 2px; /* Small margin between icons */
}

/* Bottom section alignment */
.bottom-section {
    margin-top: auto; /* Pushes this section to the bottom */
    padding-top: 20px;
    border-top: 1px solid var(--sidebar-border);
    border-bottom: none; /* Remove bottom border if it's the last section */
}

/* Specific styling for Google Auth button to override menu-button-item */
.google-auth-btn.menu-button-item {
    background-color: var(--google-auth-btn-bg);
    color: var(--button-text);
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: 600;
    transition: background-color 0.2s ease, transform 0.1s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    margin: 0 auto; /* Center the button */
    width: fit-content; /* Adjust width to content */
    text-align: center; /* Center text within the button */
}

.google-auth-btn.menu-button-item:hover:not([disabled]) {
    background-color: var(--google-auth-btn-hover-bg);
    transform: translateY(-2px);
}

.google-auth-btn.menu-button-item:active:not([disabled]) {
    transform: translateY(0);
}

.google-auth-btn.menu-button-item[disabled] {
    opacity: 0.7;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
    background-color: var(--google-auth-btn-bg); /* Keep original background on disabled */
}


/* Content Area */
.content {
    flex-grow: 1;
    padding: 20px;
    transition: margin-left 0.3s ease, width 0.3s ease;
    margin-left: 0;
    width: 100%;
    box-sizing: border-box; /* Include padding in width */
}

body.sidebar-active .content {
    margin-left: var(--sidebar-width);
    width: calc(100% - var(--sidebar-width));
}

/* Share List Section */
.share-list-section {
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 4px 12px var(--shadow-color);
    padding: 20px;
    margin-bottom: 20px;
}

.share-list-section h2 {
    color: var(--text-color);
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 1.5em;
}

/* Table Styling */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.95em;
    table-layout: auto; /* Allow columns to size based on content */
}

table th, table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
    white-space: nowrap; /* Prevent text wrapping in table headers/cells */
}

table th {
    background-color: var(--table-header-bg);
    color: var(--text-color);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85em;
}

table tbody tr:hover {
    background-color: var(--table-row-hover-bg);
}

table tbody tr.selected {
    background-color: var(--info-color); /* Highlight selected row */
    color: #fff;
}

/* Ensure text in selected row is visible */
table tbody tr.selected td {
    color: #fff;
}

/* Specific styling for action column */
table .table-actions {
    text-align: center;
    width: 1%; /* Make it as small as possible */
    white-space: nowrap;
}

/* Icon Action Buttons in table/modals */
.icon-action-btn, .modal-action-icon {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.3em;
    padding: 5px 8px; /* Padding for clickable area */
    border-radius: 4px; /* Slightly rounded for hover effect */
    transition: background-color 0.2s ease, transform 0.1s ease;
    display: inline-flex; /* Use flex to align icon vertically */
    align-items: center;
    justify-content: center;
    vertical-align: middle; /* Align with text baseline */
}

.icon-action-btn i, .modal-action-icon i {
    color: var(--icon-action-color);
    transition: color 0.2s ease;
}

.icon-action-btn.danger-icon i, .modal-action-icon.delete-icon i {
    color: var(--icon-danger-color);
}

.icon-action-btn:hover:not([disabled]), .modal-action-icon:hover:not([disabled]) {
    background-color: var(--menu-button-hover-bg); /* Use a subtle hover */
    transform: translateY(-1px);
}

.icon-action-btn.danger-icon:hover:not([disabled]) i, .modal-action-icon.delete-icon:hover:not([disabled]) i {
    color: var(--icon-danger-hover-color);
}

/* Style for icons when disabled via setIconDisabled */
.is-disabled-icon {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none; /* Disable all mouse events */
}

.is-disabled-icon i {
    color: var(--ghosted-text) !important; /* Override with ghosted text color */
}


/* Form Styling (within Modals) */
label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--label-color);
    font-size: 0.95em;
}

input[type="text"],
input[type="number"],
textarea {
    width: calc(100% - 22px); /* Adjust for padding and border */
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1em;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus {
    border-color: var(--link-color);
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
    outline: none;
}

input::placeholder,
textarea::placeholder {
    color: var(--input-placeholder-color);
    opacity: 1; /* For Firefox */
}

/* Modals */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1000; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; /* Enable scroll if needed */
    background-color: var(--modal-bg); /* Black w/ opacity */
    align-items: center; /* Center content vertically */
    justify-content: center; /* Center content horizontally */
    -webkit-overflow-scrolling: touch; /* Enable smooth scrolling on iOS */
    padding: 20px; /* Add some padding for smaller screens */
    box-sizing: border-box; /* Include padding in width/height */
}

.modal-content {
    background-color: var(--modal-content-bg);
    margin: auto;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 5px 15px var(--shadow-color);
    width: 90%; /* Default width for smaller screens */
    max-width: 500px; /* Max width for larger screens */
    display: flex;
    flex-direction: column;
    max-height: 95vh; /* Limit height to allow scrolling if content is long */
    overflow: hidden; /* Hide overflow on modal content itself */
    position: relative; /* For close button absolute positioning */
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 15px;
    margin-bottom: 15px;
}

.modal-header h2 {
    margin: 0;
    font-size: 1.5em;
    color: var(--text-color);
}

.close-btn, .form-close-button, .calc-close-button {
    color: var(--text-color);
    font-size: 2.2em;
    font-weight: bold;
    cursor: pointer;
    line-height: 1; /* Adjust line height to center 'x' */
    background: none;
    border: none;
    padding: 0 5px; /* Add some padding for easier clicking */
}

.close-btn:hover,
.close-btn:focus,
.form-close-button:hover,
.form-close-button:focus,
.calc-close-button:hover,
.calc-close-button:focus {
    color: var(--danger-color);
    text-decoration: none;
    outline: none;
}

.modal-body {
    flex-grow: 1; /* Allow body to take available height */
    overflow-y: auto; /* Enable vertical scrolling for modal content */
    padding-right: 5px; /* Compensate for scrollbar width */
}

/* Custom scrollbar for modal body */
.modal-body-scrollable::-webkit-scrollbar {
    width: 8px;
}

.modal-body-scrollable::-webkit-scrollbar-track {
    background: var(--background-color);
    border-radius: 10px;
}

.modal-body-scrollable::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 10px;
}

.modal-body-scrollable::-webkit-scrollbar-thumb:hover {
    background: var(--text-color);
}

.modal-footer {
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    gap: 15px;
    border-top: 1px solid var(--border-color);
    padding-top: 15px;
    margin-top: 20px;
    flex-shrink: 0; /* Prevent footer from shrinking */
}

/* Base style for modal action icons (now span/i elements) */
.modal-action-icon {
    background: none;
    border: none;
    padding: 8px; /* Padding for clickable area */
    border-radius: 8px; /* Slightly rounded corners */
    cursor: pointer;
    font-size: 1.5em; /* Larger icon size */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease, transform 0.1s ease, color 0.2s ease;
    min-width: 44px; /* Ensure minimum touch target size */
    min-height: 44px;
}

.modal-action-icon span {
    margin-left: 8px; /* Space between icon and text */
    font-size: 0.8em; /* Smaller text for action buttons */
    white-space: nowrap; /* Prevent text wrap */
}

.modal-action-icon i {
    color: var(--icon-action-color); /* Default color for icons */
}

.modal-action-icon.save-icon i,
.modal-action-icon.dialog-confirm-icon i {
    color: var(--success-color);
}

.modal-action-icon.delete-icon i,
.modal-action-icon.cancel-icon i,
.modal-action-icon.dialog-cancel-icon i {
    color: var(--danger-color);
}

.modal-action-icon:hover:not([disabled]) {
    background-color: var(--menu-button-hover-bg);
    transform: translateY(-2px);
}

.modal-action-icon.save-icon:hover:not([disabled]) i,
.modal-action-icon.dialog-confirm-icon:hover:not([disabled]) i {
    color: var(--success-color); /* Keep success color on hover */
}

.modal-action-icon.delete-icon:hover:not([disabled]) i,
.modal-action-icon.cancel-icon:hover:not([disabled]) i,
.modal-action-icon.dialog-cancel-icon:hover:not([disabled]) i {
    color: var(--danger-button-hover-bg); /* Darker danger on hover */
}

.add-comment-btn {
    display: inline-flex;
    align-items: center;
    background-color: var(--asx-button-bg);
    color: var(--asx-button-text);
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 0.9em;
    margin-top: 10px;
    transition: background-color 0.2s ease;
}

.add-comment-btn:hover {
    background-color: var(--asx-button-hover-bg);
}

.add-comment-btn i {
    margin-right: 8px;
    color: var(--text-color); /* Icon color matches text for these buttons */
}

/* Comments Styling */
.comments-form-container, .comments-display-container {
    border-top: 1px dashed var(--border-color);
    padding-top: 15px;
    margin-top: 15px;
}

.comment-entry {
    display: flex;
    flex-wrap: wrap; /* Allow wrapping for smaller screens */
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background-color: var(--card-bg);
    position: relative; /* For absolute positioning of remove button */
}

.comment-entry textarea {
    flex-grow: 1;
    margin-bottom: 0; /* Override default margin */
    min-height: 40px; /* Ensure a minimum height for textarea */
    box-sizing: border-box; /* Include padding in width */
    width: auto; /* Allow flex to control width */
}

.comment-entry .remove-comment-btn {
    position: static; /* Reset from absolute for flex layout */
    margin-left: auto; /* Push to the right */
    background: none;
    border: none;
    color: var(--danger-color);
    font-size: 1.5em;
    cursor: pointer;
    padding: 0 5px;
}

.comment-entry .remove-comment-btn:hover {
    color: var(--danger-button-hover-bg);
}

.comment-item {
    background-color: var(--table-row-hover-bg); /* Use a subtle background */
    padding: 10px 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    font-size: 0.9em;
    line-height: 1.4;
    color: var(--text-color);
    white-space: pre-wrap; /* Preserve whitespace and allow wrapping */
    word-break: break-word; /* Break long words */
}

.comment-date {
    display: block;
    font-size: 0.75em;
    color: var(--ghosted-text);
    margin-top: 5px;
    text-align: right;
}

/* CommSec message styling */
.commsec-message {
    font-size: 0.75em;
    margin-top: 0;
    margin-bottom: 0;
    line-height: 1.2;
    color: var(--ghosted-text); /* Use ghosted text color */
    text-align: left; /* Left align as requested */
    margin-left: 5px; /* Position closer to the link */
}

/* Calculator specific styles */
.calculator-content {
    max-width: 320px; /* Standard calculator width */
    width: 100%;
}

.calculator-display {
    background-color: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    text-align: right;
    min-height: 80px;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    overflow-x: auto; /* Enable horizontal scrolling for long numbers */
}

.calculator-display .input {
    font-size: 1.2em;
    color: var(--placeholder-text);
    min-height: 20px;
    overflow-x: auto;
    white-space: nowrap;
}

.calculator-display .result {
    font-size: 2.2em;
    font-weight: bold;
    color: var(--text-color);
    min-height: 30px;
    overflow-x: auto;
    white-space: nowrap;
}

.calculator-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.calculator-buttons button {
    background-color: var(--calc-num-btn-bg);
    color: var(--calc-num-btn-text);
    border: none;
    border-radius: 8px;
    padding: 15px;
    font-size: 1.2em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.calculator-buttons button:hover {
    background-color: var(--calc-num-btn-hover-bg);
    transform: translateY(-1px);
}

.calculator-buttons button:active {
    transform: translateY(0);
}

.calculator-buttons button.operator,
.calculator-buttons button.equals {
    background-color: var(--button-bg);
    color: var(--button-text);
}

.calculator-buttons button.operator:hover,
.calculator-buttons button.equals:hover {
    background-color: var(--button-hover-bg);
}

.calculator-buttons button.clear {
    background-color: var(--danger-button-bg);
    color: var(--button-text);
}

.calculator-buttons button.clear:hover {
    background-color: var(--danger-button-hover-bg);
}

.calculator-buttons button.span-2 {
    grid-column: span 2;
}

/* External Links */
.external-links {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px dashed var(--border-color);
}

.external-links p {
    font-weight: 600;
    color: var(--label-color);
    margin-bottom: 10px;
}

.external-link-btn {
    display: inline-flex;
    align-items: center;
    background-color: var(--secondary-button-bg);
    color: var(--button-text);
    padding: 10px 15px;
    border-radius: 8px;
    text-decoration: none;
    margin-right: 10px;
    margin-bottom: 10px;
    font-size: 0.9em;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.external-link-btn:hover {
    background-color: var(--secondary-button-hover-bg);
    transform: translateY(-2px);
}

.external-link-btn i {
    margin-right: 8px;
}

/* Custom Dialog Modal */
.custom-dialog-modal .modal-content {
    max-width: 380px;
    text-align: center;
}

.custom-dialog-modal .modal-body {
    padding: 20px 0;
}

.custom-dialog-modal #customDialogMessage {
    font-size: 1.1em;
    color: var(--text-color);
    margin: 0;
}

.custom-dialog-modal .modal-footer {
    justify-content: center;
    gap: 20px;
    padding-top: 20px;
    margin-top: 15px;
}

/* Watchlist Select and Sort Select */
.watchlist-controls-row {
    display: flex;
    width: 100%; /* Take full width */
    justify-content: space-around; /* Distribute items with space */
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: 15px 30px; /* Gap between rows and columns */
    padding: 15px 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    align-items: center; /* Vertically align items */
}

.watchlist-group,
.sort-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Align labels/selects to the start */
    width: 100%; /* Take full width on mobile */
    max-width: 250px; /* Limit width on larger screens */
}

.watchlist-group label,
.sort-group label {
    margin-bottom: 5px;
    font-size: 0.9em;
    color: var(--label-color);
}

select.dropdown-large {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1em;
    appearance: none; /* Remove default select arrow */
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236c757d%22%20d%3D%22M287%2069.9a14.7%2014.7%200%200%200-20.8%200L146.2%20190.1%2026.3%2069.9a14.7%2014.7%200%200%200-20.8%2020.8l130.4%20130.6a14.7%2014.7%200%200%200%2020.8%200L287%2090.7a14.7%2014.7%200%200%200%200-20.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
}

select.dropdown-large:focus {
    border-color: var(--link-color);
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
    outline: none;
}

select.dropdown-large[disabled] {
    opacity: 0.7;
    cursor: not-allowed;
    background-color: var(--asx-button-bg); /* Use a muted background */
}

/* Mobile specific styling for share cards */
.mobile-share-cards {
    display: none; /* Hidden by default on desktop */
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
}

.mobile-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 2px 8px var(--shadow-color);
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.2s ease;
}

.mobile-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.mobile-card.selected {
    background-color: var(--info-color); /* Highlight selected card */
    color: #fff;
}

.mobile-card.selected p, .mobile-card.selected strong {
    color: #fff;
}


.mobile-card p {
    margin: 0;
    font-size: 0.9em;
    color: var(--text-color);
}

.mobile-card p strong {
    font-weight: 600;
    color: var(--label-color);
    margin-right: 5px;
}

.mobile-card-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px dashed var(--border-color);
}

/* Scroll to top button */
.scroll-to-top-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 1.5em;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: background-color 0.2s ease, transform 0.2s ease, opacity 0.3s ease;
    z-index: 900; /* Above most content but below modals */
    opacity: 0; /* Hidden by default */
    pointer-events: none; /* Disable interaction when hidden */
}

.scroll-to-top-btn.show {
    opacity: 1;
    pointer-events: auto; /* Enable interaction when shown */
}

.scroll-to-top-btn:hover {
    background-color: var(--button-hover-bg);
    transform: translateY(-2px);
}

/* Loading and Error Messages */
.loading, .error-message {
    text-align: center;
    padding: 20px;
    font-size: 1.2em;
    color: var(--label-color);
}

.error-message {
    background-color: #ffe0e0;
    color: #cc0000;
    border: 1px solid #cc0000;
    padding: 15px;
    margin: 20px 0;
    border-radius: 8px;
}

/* Context Menu */
.context-menu {
    display: none; /* Hidden by default */
    position: fixed;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px var(--shadow-color);
    z-index: 1100; /* Higher than modals */
    padding: 10px 0;
}

.context-menu button {
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    padding: 10px 15px;
    color: var(--text-color);
    font-size: 0.95em;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    white-space: nowrap;
}

.context-menu button:hover {
    background-color: var(--table-row-hover-bg);
}

.context-menu button i {
    font-size: 1.1em;
    color: var(--icon-action-color);
}

.context-menu button#contextDeleteShareBtn i {
    color: var(--icon-danger-color);
}

/* Utility classes */
.hidden {
    display: none !important;
}

.ghosted-text {
    color: var(--ghosted-text);
    font-size: 0.85em;
    opacity: 0.8;
    margin-top: 5px;
    margin-bottom: 5px;
    display: block;
}

/* Responsive adjustments */
@media (min-width: 768px) {
    .header-action-btn-left,
    .header-action-btn-right {
        position: static; /* Reset absolute positioning */
        transform: none; /* Remove transform */
        margin-left: 15px; /* Add margin for spacing */
        margin-right: 15px;
    }

    .header-top-row {
        justify-content: space-between; /* Space out items */
    }

    h1#mainTitle {
        text-align: left; /* Align title to left on desktop */
        margin-left: 15px; /* Add margin for spacing */
    }

    .app-sidebar {
        left: 0; /* Always show sidebar on desktop */
        position: sticky;
        top: 0;
        height: 100vh; /* Make it full height */
        padding-top: 10px; /* Adjust padding */
        box-shadow: none; /* No shadow */
        z-index: 100; /* Lower z-index for sticky positioning */
    }

    .close-menu-btn {
        display: none; /* Hide close button on desktop */
    }

    .sidebar-overlay {
        display: none !important; /* Hide overlay on desktop */
    }

    .content {
        margin-left: var(--sidebar-width); /* Push content over by sidebar width */
        width: calc(100% - var(--sidebar-width));
        padding: 30px; /* More padding on desktop */
    }

    body.sidebar-active .content {
        margin-left: var(--sidebar-width);
        width: calc(100% - var(--sidebar-width));
    }

    body.sidebar-active footer.fixed-footer {
        margin-left: var(--sidebar-width);
        width: calc(100% - var(--sidebar-width));
    }

    .watchlist-controls-row {
        width: 100%;
        justify-content: center;
        flex-direction: row;
        flex-wrap: nowrap;
        gap: 20px 40px;
        padding: 15px 0;
        border-top: 1px solid var(--border-color);
        border-bottom: 1px solid var(--border-color);
    }
    .watchlist-group,
    .sort-group {
        width: auto; /* Allow content to dictate width */
        justify-content: flex-start;
        padding: 0;
        flex-basis: auto; /* Reset flex-basis for desktop */
        max-width: unset; /* Reset max-width for desktop */
    }
    .dropdown-large {
        min-width: 180px; /* Restore min-width for desktop */
        width: auto; /* Allow content to dictate width */
    }

    .fixed-footer {
        padding: 15px 20px;
    }

    table {
        display: table; /* Show table on desktop */
    }

    .mobile-share-cards {
        display: none; /* Hide mobile cards on desktop */
    }

    #scrollToTopBtn {
        display: none; /* Hide on desktop */
    }

    /* Context menu on desktop should follow mouse */
    .context-menu {
        top: var(--mouse-y, 0); /* Use CSS variables set by JS */
        left: var(--mouse-x, 0);
    }
}
