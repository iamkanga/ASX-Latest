/* File Version: v83 */
/* Last Updated: 2025-07-02 (Comment Section Display Fix) */

:root {
    /* Light Theme (Default) */
    --background-color: #eef2f3;
    --text-color: #333;
    --header-bg: #d9e2f4;
    --card-bg: #ffffff;
    --border-color: #c9d2d4;
    --button-bg: #007bff;
    --button-text: #fff;
    --button-hover-bg: #0056b3;
    --input-bg: #fff;
    --input-border: #b0b8bb;
    --input-placeholder-color: #6c757d;
    --modal-bg: rgba(0, 0, 0, 0.6);
    --modal-content-bg: #fff;
    --table-header-bg: #e6e9eb;
    --table-row-hover-bg: #f0f4f5;
    --asx-button-bg: #e2e8ea;
    --asx-button-hover-bg: #d0d7d9;
    --asx-button-text: #333;
    --asx-button-active-bg: #007bff;
    --asx-button-active-text: #fff;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --info-color: #17a2b8;
    --ghosted-text: #888; /* For less prominent text */
    --selected-row-bg: #e0f7fa; /* Light cyan for selected row */
    --selected-row-border: #00bcd4; /* Cyan border for selected row */
    --asx-button-selected-bg: #007bff; /* Active ASX button background */
    --asx-button-selected-text: #fff; /* Active ASX button text */
    --sidebar-bg: #f8f9fa;
    --sidebar-link-hover-bg: #e9ecef;
    --sidebar-border: #dee2e6;
    --sidebar-text: #343a40;
    --sidebar-icon: #6c757d;
    --sidebar-header-text: #495057;
    --modal-icon-color: #6c757d; /* Default icon color in modals */
    --modal-icon-hover-color: #333; /* Hover icon color in modals */
    --modal-icon-danger-color: #dc3545; /* Danger icon color in modals */
    --modal-icon-danger-hover-color: #c82333; /* Danger icon hover color */
    --modal-icon-secondary-color: #6c757d; /* Secondary icon color in modals */
    --modal-icon-secondary-hover-color: #5a6268; /* Secondary icon hover color */
    --sticky-footer-bg: #f8f9fa; /* Background for sticky footer */
    --sticky-footer-border: #e9ecef; /* Border for sticky footer */
}

/* Dark Theme */
body.dark-theme {
    --background-color: #2c2c2c;
    --text-color: #e0e0e0;
    --header-bg: #3c3c3c;
    --card-bg: #3a3a3a;
    --border-color: #555;
    --button-bg: #007bff; /* Keep primary blue */
    --button-text: #fff;
    --button-hover-bg: #0056b3;
    --input-bg: #444;
    --input-border: #666;
    --input-placeholder-color: #aaa;
    --modal-bg: rgba(0, 0, 0, 0.8);
    --modal-content-bg: #3a3a3a;
    --table-header-bg: #4a4a4a;
    --table-row-hover-bg: #4f4f4f;
    --asx-button-bg: #555;
    --asx-button-hover-bg: #666;
    --asx-button-text: #e0e0e0;
    --asx-button-active-bg: #007bff;
    --asx-button-active-text: #fff;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --info-color: #17a2b8;
    --ghosted-text: #999;
    --selected-row-bg: #004d5a; /* Darker cyan for selected row */
    --selected-row-border: #00bcd4;
    --asx-button-selected-bg: #007bff;
    --asx-button-selected-text: #fff;
    --sidebar-bg: #343a40;
    --sidebar-link-hover-bg: #495057;
    --sidebar-border: #444;
    --sidebar-text: #f8f9fa;
    --sidebar-icon: #adb5bd;
    --sidebar-header-text: #ced4da;
    --modal-icon-color: #adb5bd;
    --modal-icon-hover-color: #f8f9fa;
    --modal-icon-danger-color: #dc3545;
    --modal-icon-danger-hover-color: #c82333;
    --modal-icon-secondary-color: #adb5bd;
    --modal-icon-secondary-hover-color: #999;
    --sticky-footer-bg: #3a3a3a;
    --sticky-footer-border: #444;
}

/* Base Styles */
body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--background-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden; /* Prevent horizontal scroll from sidebar transition */
}

/* Layout for sidebar */
body.sidebar-active {
    margin-left: var(--sidebar-width, 250px); /* Adjust content for sidebar */
}

/* Header */
header {
    background-color: var(--header-bg);
    color: var(--text-color);
    padding: 15px 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: margin-left 0.3s ease, width 0.3s ease; /* Transition for sidebar shift */
}

.header-top-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px; /* Space between title/buttons and watchlist controls */
}

#mainTitle {
    margin: 0;
    font-size: 1.5em;
    font-weight: 600;
    text-align: center;
    flex-grow: 1; /* Allows title to take available space */
}

.header-action-btn {
    background-color: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 1em;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: background-color 0.2s ease, transform 0.1s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    white-space: nowrap; /* Prevent text wrapping */
}

.header-action-btn:hover {
    background-color: var(--button-hover-bg);
    transform: translateY(-1px);
}

.header-action-btn:active {
    transform: translateY(0);
    box-shadow: none;
}

.header-action-btn-left {
    margin-right: 10px; /* Space between hamburger and title */
}

.header-action-btn-right {
    margin-left: 10px; /* Space between add share and title */
}

.header-action-btn i {
    font-size: 1.2em;
}

/* Sidebar Navigation */
.app-sidebar {
    --sidebar-width: 250px; /* Define sidebar width */
    height: 100%;
    width: var(--sidebar-width);
    position: fixed;
    z-index: 2000; /* Above header */
    top: 0;
    left: -250px; /* Start off-screen */
    background-color: var(--sidebar-bg);
    overflow-x: hidden;
    transition: left 0.3s ease;
    padding-top: 60px; /* Space for close button */
    box-shadow: 2px 0 5px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    padding-bottom: 20px; /* Padding at the bottom for scrollable content */
    overflow-y: auto; /* Enable vertical scrolling for content */
}

.app-sidebar.open {
    left: 0; /* Slide in */
}

.close-menu-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 1.5em;
    background: none;
    border: none;
    color: var(--sidebar-text);
    cursor: pointer;
    z-index: 2001; /* Ensure it's clickable */
}

.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1999; /* Below sidebar, above main content */
    display: none; /* Hidden by default */
    opacity: 0;
    transition: opacity 0.3s ease;
}

.sidebar-overlay.open {
    display: block;
    opacity: 1;
}

.menu-section {
    padding: 15px 20px;
    border-bottom: 1px solid var(--sidebar-border);
}

.menu-section:last-child {
    border-bottom: none;
}

.menu-section h3 {
    color: var(--sidebar-header-text);
    font-size: 1em;
    margin-top: 0;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.menu-buttons-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.menu-button-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    background: none;
    border: none;
    color: var(--sidebar-text);
    font-size: 1em;
    text-align: left;
    width: 100%;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s ease, color 0.2s ease;
    text-decoration: none; /* For span/a tags used as buttons */
}

.menu-button-item i {
    color: var(--sidebar-icon);
    font-size: 1.2em;
    width: 20px; /* Fixed width for icons to align text */
    text-align: center;
}

.menu-button-item:hover {
    background-color: var(--sidebar-link-hover-bg);
    color: var(--sidebar-text);
}

.menu-button-item:hover i {
    color: var(--sidebar-text); /* Icon color on hover */
}

.menu-button-item.danger-button {
    color: var(--danger-color);
}

.menu-button-item.danger-button i {
    color: var(--danger-color);
}

.menu-button-item.danger-button:hover {
    background-color: var(--danger-color);
    color: var(--button-text);
}

.menu-button-item.danger-button:hover i {
    color: var(--button-text);
}

.menu-button-item.secondary-buttons {
    color: var(--sidebar-icon); /* Use icon color for secondary text */
}

.menu-button-item.secondary-buttons i {
    color: var(--sidebar-icon);
}

.menu-button-item.secondary-buttons:hover {
    background-color: var(--sidebar-link-hover-bg);
    color: var(--sidebar-text);
}

.menu-button-item.secondary-buttons:hover i {
    color: var(--sidebar-text);
}

.theme-select-label {
    color: var(--sidebar-text);
    font-size: 0.9em;
    margin-top: 10px;
    margin-bottom: 5px;
    display: block;
}

.menu-dropdown {
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid var(--input-border);
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 0.9em;
}

.logout-section {
    margin-top: auto; /* Pushes logout section to the bottom */
    border-top: 1px solid var(--sidebar-border);
    padding-top: 15px;
}

/* Watchlist and Sort Controls */
.watchlist-controls-row {
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 15px 20px;
    background-color: var(--background-color);
    border-bottom: 1px solid var(--border-color);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    align-items: center; /* Center items horizontally on mobile */
}

.watchlist-group,
.sort-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%; /* Take full width on mobile */
    max-width: 300px; /* Limit width for larger screens */
}

.dropdown-large {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1em;
    appearance: none; /* Remove default dropdown arrow */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236c757d%22%20d%3D%22M287%2C197.3L159.2%2C69.5c-3.2-3.2-8.3-3.2-11.5%2C0L5.4%2C197.3c-3.2%2C3.2-3.2%2C8.3%2C0%2C11.5l15.3%2C15.3c3.2%2C3.2%2C8.3%2C3.2%2C11.5%2C0l118.8-118.8c3.2-3.2%2C8.3-3.2%2C11.5%2C0l118.8%2C118.8c3.2%2C3.2%2C8.3%2C3.2%2C11.5%2C0l15.3-15.3C290.2%2C205.6%2C290.2%2C200.5%2C287%2C197.3z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    cursor: pointer;
}

.dropdown-large:focus {
    outline: none;
    border-color: var(--button-bg);
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

/* ASX Code Buttons */
.asx-code-buttons-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 10px 20px;
    justify-content: center;
    background-color: var(--background-color);
    border-bottom: 1px solid var(--border-color);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.asx-code-btn {
    background-color: var(--asx-button-bg);
    color: var(--asx-button-text);
    border: 1px solid var(--input-border);
    border-radius: 6px;
    padding: 6px 12px;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: 600;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    white-space: nowrap;
}

.asx-code-btn:hover {
    background-color: var(--asx-button-hover-bg);
}

.asx-code-btn.active {
    background-color: var(--asx-button-active-bg);
    color: var(--asx-button-active-text);
    border-color: var(--asx-button-active-bg);
}

/* Main Content Area */
.container {
    flex-grow: 1;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

/* Loading Indicator */
.loading {
    text-align: center;
    padding: 20px;
    font-size: 1.2em;
    color: var(--ghosted-text);
}

/* Share List Table */
.share-list-section {
    flex-grow: 1;
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    overflow-x: auto; /* Enable horizontal scrolling for table on small screens */
    margin-top: 20px;
}

.table-container {
    width: 100%;
    overflow-x: auto; /* Ensures table can scroll if content is too wide */
}

#shareTable {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px; /* Ensure table doesn't shrink too much */
}

#shareTable th, #shareTable td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
    white-space: nowrap; /* Prevent text wrapping in table cells */
}

#shareTable th {
    background-color: var(--table-header-bg);
    font-weight: 600;
    color: var(--text-color);
    text-transform: uppercase;
    font-size: 0.9em;
}

#shareTable tbody tr:hover {
    background-color: var(--table-row-hover-bg);
    cursor: pointer;
}

#shareTable tbody tr.selected {
    background-color: var(--selected-row-bg);
    border-left: 5px solid var(--selected-row-border);
}

.dividend-yield-cell-content {
    display: flex;
    justify-content: space-between;
    font-size: 0.9em;
}

.dividend-yield-cell-content .value {
    font-weight: 600;
}


/* Mobile Share Cards (Hidden by default, shown on small screens) */
.mobile-share-cards {
    display: none; /* Hidden on desktop */
    padding: 10px;
}

.mobile-card {
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    position: relative; /* For selected border */
}

.mobile-card.selected {
    border: 2px solid var(--selected-row-border);
    box-shadow: 0 0 0 3px var(--selected-row-border), 0 4px 8px rgba(0, 0, 0, 0.1);
}

.mobile-card h3 {
    margin-top: 0;
    margin-bottom: 10px;
    color: var(--text-color);
    font-size: 1.2em;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 5px;
}

.mobile-card p {
    margin: 5px 0;
    font-size: 0.95em;
}

.mobile-card .card-comments {
    font-size: 0.85em;
    color: var(--ghosted-text);
    margin-top: 10px;
    border-top: 1px dashed var(--border-color);
    padding-top: 8px;
}

/* Footer */
.fixed-footer {
    background-color: var(--sticky-footer-bg);
    padding: 10px 20px;
    text-align: center;
    border-top: 1px solid var(--sticky-footer-border);
    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.05);
    position: sticky;
    bottom: 0;
    width: 100%;
    box-sizing: border-box;
    z-index: 999; /* Below modals, above main content */
    transition: margin-left 0.3s ease, width 0.3s ease; /* Transition for sidebar shift */
}

.google-auth-btn {
    background-color: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-size: 1em;
    cursor: pointer;
    transition: background-color 0.2s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    width: 100%; /* Full width on mobile */
    max-width: 300px; /* Limit width on desktop */
}

.google-auth-btn:hover {
    background-color: var(--button-hover-bg);
}

.google-auth-btn:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
    box-shadow: none;
}

/* Scroll to Top Button */
#scrollToTopBtn {
    display: none; /* Hidden by default */
    position: fixed;
    bottom: 80px; /* Above the footer */
    right: 20px;
    z-index: 100;
    background-color: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 1.5em;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: opacity 0.3s ease, background-color 0.2s ease;
    align-items: center;
    justify-content: center;
    opacity: 0;
}

#scrollToTopBtn:hover {
    background-color: var(--button-hover-bg);
}

/* Modals */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 3000; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; /* Enable scroll if needed */
    background-color: var(--modal-bg);
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    padding: 20px; /* Padding around the modal content */
    box-sizing: border-box;
}

.modal-content {
    background-color: var(--modal-content-bg);
    margin: auto;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    width: 90%; /* Default width for mobile */
    max-width: 500px; /* Max width for desktop */
    position: relative;
    display: flex;
    flex-direction: column;
    max-height: 90vh; /* Limit height to allow scrolling */
    overflow: hidden; /* Hide overflow for modal content itself */
}

.modal-header-with-icon {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
}

.modal-header-with-icon h2 {
    margin: 0;
    font-size: 1.4em;
    color: var(--text-color);
}

.modal-body-scrollable {
    flex-grow: 1; /* Allows content to take available space */
    overflow-y: auto; /* Enables scrolling for content within the modal */
    padding-right: 5px; /* Prevent scrollbar from overlapping content */
    margin-right: -5px; /* Compensate for padding-right */
}

.modal-content label {
    display: block;
    margin-bottom: 5px;
    margin-top: 10px;
    color: var(--text-color);
    font-weight: 600;
    font-size: 0.95em;
}

.modal-content input[type="text"],
.modal-content input[type="number"],
.modal-content textarea,
.modal-content select {
    width: calc(100% - 22px); /* Account for padding and border */
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1em;
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
}

.modal-content input::placeholder,
.modal-content textarea::placeholder {
    color: var(--input-placeholder-color);
}

.modal-content input:focus,
.modal-content textarea:focus,
.modal-content select:focus {
    outline: none;
    border-color: var(--button-bg);
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.modal-content textarea {
    resize: vertical;
    min-height: 60px;
    line-height: 1.4;
}

.close-button {
    color: var(--modal-icon-color);
    font-size: 2em;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
    line-height: 0.8; /* Adjust line-height to center 'x' vertically */
    padding: 0 5px; /* Add some padding for easier clicking */
}

.close-button:hover,
.close-button:focus {
    color: var(--modal-icon-hover-color);
    text-decoration: none;
    outline: none;
}

/* Modal Action Buttons (Footer of modals) */
.modal-action-buttons, .form-action-buttons {
    display: flex;
    justify-content: flex-end; /* Align to right */
    gap: 15px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
    margin-top: 15px;
    flex-shrink: 0; /* Prevent shrinking when modal-body-scrollable grows */
}

.modal-form-buttons {
    position: sticky; /* Make it sticky at the bottom of the modal */
    bottom: 0;
    background-color: var(--modal-content-bg); /* Match modal background */
    padding-bottom: 0; /* No padding at the very bottom */
    margin-bottom: -20px; /* Pull it down to cover modal padding */
    left: -20px; /* Pull it left to cover modal padding */
    width: calc(100% + 40px); /* Extend width to cover modal padding */
    box-sizing: border-box;
    border-bottom-left-radius: 12px; /* Match modal border radius */
    border-bottom-right-radius: 12px;
    z-index: 10; /* Ensure it's above scrollable content */
    padding-left: 20px; /* Add padding back for content */
    padding-right: 20px; /* Add padding back for content */
}

.modal-action-icon {
    font-size: 1.8em; /* Larger icons */
    cursor: pointer;
    color: var(--modal-icon-color);
    transition: color 0.2s ease, transform 0.1s ease;
    padding: 5px; /* Make clickable area larger */
    border-radius: 50%; /* Rounded background on hover */
    display: inline-flex; /* For centering icon */
    align-items: center;
    justify-content: center;
}

.modal-action-icon:hover {
    color: var(--modal-icon-hover-color);
    background-color: rgba(0, 0, 0, 0.05); /* Subtle hover background */
    transform: translateY(-1px);
}

.modal-action-icon:active {
    transform: translateY(0);
}

.modal-action-icon.danger {
    color: var(--modal-icon-danger-color);
}

.modal-action-icon.danger:hover {
    color: var(--modal-icon-danger-hover-color);
    background-color: rgba(220, 53, 69, 0.1); /* Reddish hover background */
}

.modal-action-icon.secondary {
    color: var(--modal-icon-secondary-color);
}

.modal-action-icon.secondary:hover {
    color: var(--modal-icon-secondary-hover-color);
    background-color: rgba(108, 117, 125, 0.1); /* Grayish hover background */
}

/* Visually disabled state for icons/spans acting as buttons */
.is-disabled-icon {
    pointer-events: none; /* Disable click events */
    opacity: 0.5; /* Dim it */
    cursor: not-allowed;
}

/* Specific modal adjustments */
.add-share-modal-content {
    max-width: 600px; /* Wider for share form */
}

.calculator-modal-content {
    max-width: 350px; /* Narrower for calculators */
}

.calc-input-group {
    margin-bottom: 10px;
}

.calculator-display {
    background-color: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 15px;
    text-align: right;
    min-height: 80px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    overflow: hidden;
}

.calculator-input {
    font-size: 0.9em;
    color: var(--ghosted-text);
    min-height: 20px;
    white-space: nowrap;
    overflow-x: auto;
}

.calculator-result {
    font-size: 2em;
    font-weight: bold;
    color: var(--text-color);
    white-space: nowrap;
    overflow-x: auto;
}

.calculator-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.calc-btn {
    background-color: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 8px;
    padding: 15px;
    font-size: 1.2em;
    cursor: pointer;
    transition: background-color 0.2s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.calc-btn:hover {
    background-color: var(--button-hover-bg);
}

.calc-btn.clear {
    background-color: var(--danger-color);
}
.calc-btn.clear:hover {
    background-color: #c82333;
}
.calc-btn.operator, .calc-btn.equals {
    background-color: var(--info-color);
}
.calc-btn.operator:hover, .calc-btn.equals:hover {
    background-color: #138496;
}
.calc-btn.zero {
    grid-column: span 2;
}
.calc-btn.equals {
    grid-column: span 2; /* Make equals button span 2 columns */
}

/* Comments Section in Share Form */
.comments-form-container {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
    display: block; /* ENSURE VISIBILITY */
}

.comments-form-container h3 {
    display: flex;
    align-items: center;
    margin-top: 0;
    margin-bottom: 15px;
    color: var(--text-color);
    font-size: 1.1em;
}

.add-section-icon {
    cursor: pointer;
    color: var(--button-bg); /* primary color */
    margin-left: 10px;
    font-size: 1.2em; /* Slightly larger for better tap target */
    display: inline-flex; /* ENSURE VISIBILITY */
    align-items: center;
    justify-content: center;
    width: 30px; /* Give it a clickable area */
    height: 30px;
    border-radius: 50%;
    transition: background-color 0.2s ease;
    flex-shrink: 0; /* Prevent shrinking */
}

.add-section-icon:hover {
    background-color: var(--button-hover-bg);
    color: var(--button-text);
}

.comment-section {
    border: 1px solid var(--input-border);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
    background-color: var(--card-bg);
    display: block; /* ENSURE VISIBILITY */
}

.comment-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
}

.comment-title-input {
    flex-grow: 1;
    margin-right: 10px;
    font-weight: 600;
}

.comment-delete-btn {
    background-color: var(--danger-color);
    color: white;
    border: none;
    border-radius: 50%;
    width: 28px; /* Slightly larger for better tap target */
    height: 28px;
    cursor: pointer;
    font-size: 1em;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
    flex-shrink: 0; /* Prevent shrinking */
}

.comment-delete-btn:hover {
    background-color: #c82333; /* Darker red */
}

/* Share Details Modal Comments */
.modal-comments-sections {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.modal-comments-sections h3 {
    margin-top: 0;
    margin-bottom: 10px;
    color: var(--text-color);
    font-size: 1.1em;
}

.modal-comment-item {
    background-color: var(--background-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
}

.modal-comment-item strong {
    display: block;
    margin-bottom: 5px;
    color: var(--text-color);
}

.modal-comment-item p {
    margin: 0;
    font-size: 0.9em;
    color: var(--text-color);
}

/* External Links Section in Share Details Modal */
.external-links-section {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.external-links-section h3 {
    margin-top: 0;
    margin-bottom: 10px;
    color: var(--text-color);
    font-size: 1.1em;
}

.external-link {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    color: var(--button-bg);
    text-decoration: none;
    font-size: 0.95em;
    transition: color 0.2s ease;
}

.external-link:hover {
    color: var(--button-hover-bg);
    text-decoration: underline;
}

.external-link i {
    font-size: 1em;
}

.ghosted-text {
    color: var(--ghosted-text);
    font-size: 0.85em;
    text-align: center;
    margin-top: 10px;
    margin-bottom: 0;
}

.error-message {
    background-color: #ffe0e0; /* Light red background */
    color: #cc0000; /* Dark red text */
    border: 1px solid #cc0000;
    border-radius: 8px;
    padding: 15px;
    margin: 20px 0;
    font-size: 0.95em;
    line-height: 1.4;
}

.error-message strong {
    font-weight: bold;
}

.error-message p {
    margin: 5px 0;
}

/* Context Menu Styles */
.context-menu {
    display: none; /* Hidden by default */
    position: fixed;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 4000; /* Above all other modals */
    padding: 5px 0;
    min-width: 150px;
}

.context-menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    font-size: 0.95em;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.context-menu-item i {
    font-size: 1.1em;
    color: var(--sidebar-icon); /* Use a neutral icon color */
}

.context-menu-item:hover {
    background-color: var(--table-row-hover-bg);
    color: var(--text-color);
}

.context-menu-item.danger-button {
    color: var(--danger-color);
}

.context-menu-item.danger-button i {
    color: var(--danger-color);
}

.context-menu-item.danger-button:hover {
    background-color: var(--danger-color);
    color: var(--button-text);
}

.context-menu-item.danger-button:hover i {
    color: var(--button-text);
}

/* Theme-specific styles (e.g., Bold Themes) */
body.theme-bold-1 { /* Bold Ocean */
    --background-color: #e0f7fa; /* Light Blue */
    --text-color: #004d40; /* Dark Teal */
    --header-bg: #00796b; /* Teal */
    --card-bg: #ffffff;
    --border-color: #b2ebf2;
    --button-bg: #00796b;
    --button-hover-bg: #004d40;
    --input-bg: #ffffff;
    --input-border: #80cbc4;
    --modal-content-bg: #ffffff;
    --table-header-bg: #4db6ac;
    --table-row-hover-bg: #e0f2f7;
    --asx-button-bg: #80cbc4;
    --asx-button-hover-bg: #4db6ac;
    --asx-button-text: #004d40;
    --asx-button-active-bg: #00796b;
    --asx-button-active-text: #fff;
    --sidebar-bg: #004d40;
    --sidebar-link-hover-bg: #00796b;
    --sidebar-text: #e0f7fa;
    --sidebar-icon: #b2ebf2;
    --sidebar-header-text: #80cbc4;
    --sticky-footer-bg: #e0f7fa;
    --sticky-footer-border: #b2ebf2;
}

body.theme-bold-2 { /* Bold Forest */
    --background-color: #e8f5e9; /* Light Green */
    --text-color: #1b5e20; /* Dark Green */
    --header-bg: #388e3c; /* Medium Green */
    --card-bg: #ffffff;
    --border-color: #a5d6a7;
    --button-bg: #388e3c;
    --button-hover-bg: #1b5e20;
    --input-bg: #ffffff;
    --input-border: #81c784;
    --modal-content-bg: #ffffff;
    --table-header-bg: #66bb6a;
    --table-row-hover-bg: #e8f8e9;
    --asx-button-bg: #a5d6a7;
    --asx-button-hover-bg: #66bb6a;
    --asx-button-text: #1b5e20;
    --asx-button-active-bg: #388e3c;
    --asx-button-active-text: #fff;
    --sidebar-bg: #1b5e20;
    --sidebar-link-hover-bg: #388e3c;
    --sidebar-text: #e8f5e9;
    --sidebar-icon: #a5d6a7;
    --sidebar-header-text: #81c784;
    --sticky-footer-bg: #e8f5e9;
    --sticky-footer-border: #a5d6a7;
}

body.theme-bold-3 { /* Bold Sunset */
    --background-color: #fff3e0; /* Light Orange */
    --text-color: #e65100; /* Dark Orange */
    --header-bg: #f57c00; /* Orange */
    --card-bg: #ffffff;
    --border-color: #ffcc80;
    --button-bg: #f57c00;
    --button-hover-bg: #e65100;
    --input-bg: #ffffff;
    --input-border: #ffb74d;
    --modal-content-bg: #ffffff;
    --table-header-bg: #ffb74d;
    --table-row-hover-bg: #fff6e0;
    --asx-button-bg: #ffcc80;
    --asx-button-hover-bg: #ffb74d;
    --asx-button-text: #e65100;
    --asx-button-active-bg: #f57c00;
    --asx-button-active-text: #fff;
    --sidebar-bg: #e65100;
    --sidebar-link-hover-bg: #f57c00;
    --sidebar-text: #fff3e0;
    --sidebar-icon: #ffcc80;
    --sidebar-header-text: #ffb74d;
    --sticky-footer-bg: #fff3e0;
    --sticky-footer-border: #ffcc80;
}

body.theme-bold-4 { /* Bold Royal */
    --background-color: #e3f2fd; /* Light Blue */
    --text-color: #1a237e; /* Dark Blue */
    --header-bg: #3f51b5; /* Indigo */
    --card-bg: #ffffff;
    --border-color: #9fa8da;
    --button-bg: #3f51b5;
    --button-hover-bg: #1a237e;
    --input-bg: #ffffff;
    --input-border: #7986cb;
    --modal-content-bg: #ffffff;
    --table-header-bg: #5c6bc0;
    --table-row-hover-bg: #e3f5fd;
    --asx-button-bg: #9fa8da;
    --asx-button-hover-bg: #5c6bc0;
    --asx-button-text: #1a237e;
    --asx-button-active-bg: #3f51b5;
    --asx-button-active-text: #fff;
    --sidebar-bg: #1a237e;
    --sidebar-link-hover-bg: #3f51b5;
    --sidebar-text: #e3f2fd;
    --sidebar-icon: #9fa8da;
    --sidebar-header-text: #7986cb;
    --sticky-footer-bg: #e3f2fd;
    --sticky-footer-border: #9fa8da;
}

body.theme-bold-5 { /* Bold Grape */
    --background-color: #f3e5f5; /* Light Purple */
    --text-color: #4a148c; /* Dark Purple */
    --header-bg: #7b1fa2; /* Purple */
    --card-bg: #ffffff;
    --border-color: #ce93d8;
    --button-bg: #7b1fa2;
    --button-hover-bg: #4a148c;
    --input-bg: #ffffff;
    --input-border: #ba68c8;
    --modal-content-bg: #ffffff;
    --table-header-bg: #9c27b0;
    --table-row-hover-bg: #f3e8f5;
    --asx-button-bg: #ce93d8;
    --asx-button-hover-bg: #ba68c8;
    --asx-button-text: #4a148c;
    --asx-button-active-bg: #7b1fa2;
    --asx-button-active-text: #fff;
    --sidebar-bg: #4a148c;
    --sidebar-link-hover-bg: #7b1fa2;
    --sidebar-text: #f3e5f5;
    --sidebar-icon: #ce93d8;
    --sidebar-header-text: #ba68c8;
    --sticky-footer-bg: #f3e5f5;
    --sticky-footer-border: #ce93d8;
}

body.theme-bold-6 { /* Bold Fire */
    --background-color: #fbe9e7; /* Light Red */
    --text-color: #bf360c; /* Dark Red-Orange */
    --header-bg: #ff5722; /* Deep Orange */
    --card-bg: #ffffff;
    --border-color: #ffab91;
    --button-bg: #ff5722;
    --button-hover-bg: #bf360c;
    --input-bg: #ffffff;
    --input-border: #ff8a65;
    --modal-content-bg: #ffffff;
    --table-header-bg: #ff7043;
    --table-row-hover-bg: #fbecec;
    --asx-button-bg: #ffab91;
    --asx-button-hover-bg: #ff8a65;
    --asx-button-text: #bf360c;
    --asx-button-active-bg: #ff5722;
    --asx-button-active-text: #fff;
    --sidebar-bg: #bf360c;
    --sidebar-link-hover-bg: #ff5722;
    --sidebar-text: #fbe9e7;
    --sidebar-icon: #ffab91;
    --sidebar-header-text: #ff8a65;
    --sticky-footer-bg: #fbe9e7;
    --sticky-footer-border: #ffab91;
}

body.theme-bold-7 { /* Bold Emerald */
    --background-color: #e0f2f1; /* Light Cyan */
    --text-color: #004d40; /* Dark Teal */
    --header-bg: #00897b; /* Teal */
    --card-bg: #ffffff;
    --border-color: #80cbc4;
    --button-bg: #00897b;
    --button-hover-bg: #004d40;
    --input-bg: #ffffff;
    --input-border: #4db6ac;
    --modal-content-bg: #ffffff;
    --table-header-bg: #26a69a;
    --table-row-hover-bg: #e0f5f1;
    --asx-button-bg: #80cbc4;
    --asx-button-hover-bg: #4db6ac;
    --asx-button-text: #004d40;
    --asx-button-active-bg: #00897b;
    --asx-button-active-text: #fff;
    --sidebar-bg: #004d40;
    --sidebar-link-hover-bg: #00897b;
    --sidebar-text: #e0f2f1;
    --sidebar-icon: #80cbc4;
    --sidebar-header-text: #4db6ac;
    --sticky-footer-bg: #e0f2f1;
    --sticky-footer-border: #80cbc4;
}

body.theme-bold-8 { /* Bold Plum */
    --background-color: #ede7f6; /* Light Purple */
    --text-color: #311b92; /* Dark Purple */
    --header-bg: #5e35b1; /* Deep Purple */
    --card-bg: #ffffff;
    --border-color: #b39ddb;
    --button-bg: #5e35b1;
    --button-hover-bg: #311b92;
    --input-bg: #ffffff;
    --input-border: #9575cd;
    --modal-content-bg: #ffffff;
    --table-header-bg: #7e57c2;
    --table-row-hover-bg: #edebf6;
    --asx-button-bg: #b39ddb;
    --asx-button-hover-bg: #9575cd;
    --asx-button-text: #311b92;
    --asx-button-active-bg: #5e35b1;
    --asx-button-active-text: #fff;
    --sidebar-bg: #311b92;
    --sidebar-link-hover-bg: #5e35b1;
    --sidebar-text: #ede7f6;
    --sidebar-icon: #b39ddb;
    --sidebar-header-text: #9575cd;
    --sticky-footer-bg: #ede7f6;
    --sticky-footer-border: #b39ddb;
}

body.theme-bold-9 { /* Bold Aqua */
    --background-color: #e0f7fa; /* Light Cyan */
    --text-color: #006064; /* Dark Cyan */
    --header-bg: #00838f; /* Cyan */
    --card-bg: #ffffff;
    --border-color: #80deea;
    --button-bg: #00838f;
    --button-hover-bg: #006064;
    --input-bg: #ffffff;
    --input-border: #4dd0e1;
    --modal-content-bg: #ffffff;
    --table-header-bg: #26c6da;
    --table-row-hover-bg: #e0fafa;
    --asx-button-bg: #80deea;
    --asx-button-hover-bg: #4dd0e1;
    --asx-button-text: #006064;
    --asx-button-active-bg: #00838f;
    --asx-button-active-text: #fff;
    --sidebar-bg: #006064;
    --sidebar-link-hover-bg: #00838f;
    --sidebar-text: #e0f7fa;
    --sidebar-icon: #80deea;
    --sidebar-header-text: #4dd0e1;
    --sticky-footer-bg: #e0f7fa;
    --sticky-footer-border: #80deea;
}

body.theme-bold-10 { /* Bold Ruby */
    --background-color: #ffebee; /* Light Red */
    --text-color: #b71c1c; /* Dark Red */
    --header-bg: #d32f2f; /* Red */
    --card-bg: #ffffff;
    --border-color: #ef9a9a;
    --button-bg: #d32f2f;
    --button-hover-bg: #b71c1c;
    --input-bg: #ffffff;
    --input-border: #e57373;
    --modal-content-bg: #ffffff;
    --table-header-bg: #ef5350;
    --table-row-hover-bg: #fff0f0;
    --asx-button-bg: #ef9a9a;
    --asx-button-hover-bg: #e57373;
    --asx-button-text: #b71c1c;
    --asx-button-active-bg: #d32f2f;
    --asx-button-active-text: #fff;
    --sidebar-bg: #b71c1c;
    --sidebar-link-hover-bg: #d32f2f;
    --sidebar-text: #ffebee;
    --sidebar-icon: #ef9a9a;
    --sidebar-header-text: #e57373;
    --sticky-footer-bg: #ffebee;
    --sticky-footer-border: #ef9a9a;
}

/* Subtle Themes */
body.theme-subtle-1 { /* Subtle Sky */
    --background-color: #f0f8ff;
    --text-color: #3f51b5;
    --header-bg: #e0f2f7;
    --card-bg: #ffffff;
    --border-color: #bbdefb;
    --button-bg: #64b5f6;
    --button-hover-bg: #42a5f5;
    --input-bg: #ffffff;
    --input-border: #90caf9;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e3f2fd;
    --table-row-hover-bg: #f5fbff;
    --asx-button-bg: #e3f2fd;
    --asx-button-hover-bg: #c5e1f1;
    --asx-button-text: #3f51b5;
    --asx-button-active-bg: #64b5f6;
    --asx-button-active-text: #fff;
    --sidebar-bg: #e0f2f7;
    --sidebar-link-hover-bg: #c5e1f1;
    --sidebar-text: #3f51b5;
    --sidebar-icon: #64b5f6;
    --sidebar-header-text: #42a5f5;
    --sticky-footer-bg: #f0f8ff;
    --sticky-footer-border: #bbdefb;
}

body.theme-subtle-2 { /* Subtle Earth */
    --background-color: #f8f5ed;
    --text-color: #5d4037;
    --header-bg: #efebe9;
    --card-bg: #ffffff;
    --border-color: #d7ccc8;
    --button-bg: #8d6e63;
    --button-hover-bg: #6d4c41;
    --input-bg: #ffffff;
    --input-border: #a1887f;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e0d8d5;
    --table-row-hover-bg: #fcfaf8;
    --asx-button-bg: #e0d8d5;
    --asx-button-hover-bg: #c7b9b4;
    --asx-button-text: #5d4037;
    --asx-button-active-bg: #8d6e63;
    --asx-button-active-text: #fff;
    --sidebar-bg: #efebe9;
    --sidebar-link-hover-bg: #c7b9b4;
    --sidebar-text: #5d4037;
    --sidebar-icon: #8d6e63;
    --sidebar-header-text: #6d4c41;
    --sticky-footer-bg: #f8f5ed;
    --sticky-footer-border: #d7ccc8;
}

body.theme-subtle-3 { /* Subtle Rose */
    --background-color: #fff0f5;
    --text-color: #ad1457;
    --header-bg: #f8bbd0;
    --card-bg: #ffffff;
    --border-color: #f48fb1;
    --button-bg: #ec407a;
    --button-hover-bg: #d81b60;
    --input-bg: #ffffff;
    --input-border: #f06292;
    --modal-content-bg: #ffffff;
    --table-header-bg: #fce4ec;
    --table-row-hover-bg: #fff5f8;
    --asx-button-bg: #f8bbd0;
    --asx-button-hover-bg: #f48fb1;
    --asx-button-text: #ad1457;
    --asx-button-active-bg: #ec407a;
    --asx-button-active-text: #fff;
    --sidebar-bg: #f8bbd0;
    --sidebar-link-hover-bg: #f48fb1;
    --sidebar-text: #ad1457;
    --sidebar-icon: #ec407a;
    --sidebar-header-text: #d81b60;
    --sticky-footer-bg: #fff0f5;
    --sticky-footer-border: #f48fb1;
}

body.theme-subtle-4 { /* Subtle Lavender */
    --background-color: #f3e5f5;
    --text-color: #6a1b9a;
    --header-bg: #e1bee7;
    --card-bg: #ffffff;
    --border-color: #ce93d8;
    --button-bg: #ab47bc;
    --button-hover-bg: #8e24aa;
    --input-bg: #ffffff;
    --input-border: #ba68c8;
    --modal-content-bg: #ffffff;
    --table-header-bg: #f3e5f5;
    --table-row-hover-bg: #f8edf9;
    --asx-button-bg: #e1bee7;
    --asx-button-hover-bg: #ce93d8;
    --asx-button-text: #6a1b9a;
    --asx-button-active-bg: #ab47bc;
    --asx-button-active-text: #fff;
    --sidebar-bg: #e1bee7;
    --sidebar-link-hover-bg: #ce93d8;
    --sidebar-text: #6a1b9a;
    --sidebar-icon: #ab47bc;
    --sidebar-header-text: #8e24aa;
    --sticky-footer-bg: #f3e5f5;
    --sticky-footer-border: #ce93d8;
}

body.theme-subtle-5 { /* Subtle Mint */
    --background-color: #e0f2f1;
    --text-color: #00695c;
    --header-bg: #b2dfdb;
    --card-bg: #ffffff;
    --border-color: #80cbc4;
    --button-bg: #4db6ac;
    --button-hover-bg: #26a69a;
    --input-bg: #ffffff;
    --input-border: #4db6ac;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e0f2f1;
    --table-row-hover-bg: #f0f8f7;
    --asx-button-bg: #b2dfdb;
    --asx-button-hover-bg: #80cbc4;
    --asx-button-text: #00695c;
    --asx-button-active-bg: #4db6ac;
    --asx-button-active-text: #fff;
    --sidebar-bg: #b2dfdb;
    --sidebar-link-hover-bg: #80cbc4;
    --sidebar-text: #00695c;
    --sidebar-icon: #4db6ac;
    --sidebar-header-text: #26a69a;
    --sticky-footer-bg: #e0f2f1;
    --sticky-footer-border: #80cbc4;
}

body.theme-subtle-6 { /* Subtle Sand */
    --background-color: #fff8e1;
    --text-color: #e65100;
    --header-bg: #ffe0b2;
    --card-bg: #ffffff;
    --border-color: #ffcc80;
    --button-bg: #ffb74d;
    --button-hover-bg: #ffa726;
    --input-bg: #ffffff;
    --input-border: #ffb74d;
    --modal-content-bg: #ffffff;
    --table-header-bg: #fff8e1;
    --table-row-hover-bg: #fffaf0;
    --asx-button-bg: #ffe0b2;
    --asx-button-hover-bg: #ffcc80;
    --asx-button-text: #e65100;
    --asx-button-active-bg: #ffb74d;
    --asx-button-active-text: #fff;
    --sidebar-bg: #ffe0b2;
    --sidebar-link-hover-bg: #ffcc80;
    --sidebar-text: #e65100;
    --sidebar-icon: #ffb74d;
    --sidebar-header-text: #ffa726;
    --sticky-footer-bg: #fff8e1;
    --sticky-footer-border: #ffcc80;
}

body.theme-subtle-7 { /* Subtle Graphite */
    --background-color: #eceff1;
    --text-color: #37474f;
    --header-bg: #cfd8dc;
    --card-bg: #ffffff;
    --border-color: #b0bec5;
    --button-bg: #78909c;
    --button-hover-bg: #546e7a;
    --input-bg: #ffffff;
    --input-border: #90a4ae;
    --modal-content-bg: #ffffff;
    --table-header-bg: #eceff1;
    --table-row-hover-bg: #f3f5f6;
    --asx-button-bg: #cfd8dc;
    --asx-button-hover-bg: #b0bec5;
    --asx-button-text: #37474f;
    --asx-button-active-bg: #78909c;
    --asx-button-active-text: #fff;
    --sidebar-bg: #cfd8dc;
    --sidebar-link-hover-bg: #b0bec5;
    --sidebar-text: #37474f;
    --sidebar-icon: #78909c;
    --sidebar-header-text: #546e7a;
    --sticky-footer-bg: #eceff1;
    --sticky-footer-border: #b0bec5;
}

body.theme-subtle-8 { /* Subtle Peach */
    --background-color: #fff3e0;
    --text-color: #ff8a65;
    --header-bg: #ffccbc;
    --card-bg: #ffffff;
    --border-color: #ffab91;
    --button-bg: #ff8a65;
    --button-hover-bg: #ff7043;
    --input-bg: #ffffff;
    --input-border: #ffab91;
    --modal-content-bg: #ffffff;
    --table-header-bg: #fff3e0;
    --table-row-hover-bg: #fff6ed;
    --asx-button-bg: #ffccbc;
    --asx-button-hover-bg: #ffab91;
    --asx-button-text: #ff8a65;
    --asx-button-active-bg: #ff8a65;
    --asx-button-active-text: #fff;
    --sidebar-bg: #ffccbc;
    --sidebar-link-hover-bg: #ffab91;
    --sidebar-text: #ff8a65;
    --sidebar-icon: #ff8a65;
    --sidebar-header-text: #ff7043;
    --sticky-footer-bg: #fff3e0;
    --sticky-footer-border: #ffab91;
}

body.theme-subtle-9 { /* Subtle Teal */
    --background-color: #e0f7fa;
    --text-color: #006064;
    --header-bg: #b2ebf2;
    --card-bg: #ffffff;
    --border-color: #80deea;
    --button-bg: #4dd0e1;
    --button-hover-bg: #26c6da;
    --input-bg: #ffffff;
    --input-border: #4dd0e1;
    --modal-content-bg: #ffffff;
    --table-header-bg: #e0f7fa;
    --table-row-hover-bg: #f0fafa;
    --asx-button-bg: #b2ebf2;
    --asx-button-hover-bg: #80deea;
    --asx-button-text: #006064;
    --asx-button-active-bg: #4dd0e1;
    --asx-button-active-text: #fff;
    --sidebar-bg: #b2ebf2;
    --sidebar-link-hover-bg: #80deea;
    --sidebar-text: #006064;
    --sidebar-icon: #4dd0e1;
    --sidebar-header-text: #26c6da;
    --sticky-footer-bg: #e0f7fa;
    --sticky-footer-border: #80deea;
}

body.theme-subtle-10 { /* Subtle Stone */
    --background-color: #f5f5f5;
    --text-color: #424242;
    --header-bg: #e0e0e0;
    --card-bg: #ffffff;
    --border-color: #bdbdbd;
    --button-bg: #9e9e9e;
    --button-hover-bg: #757575;
    --input-bg: #ffffff;
    --input-border: #e0e0e0;
    --modal-content-bg: #ffffff;
    --table-header-bg: #f5f5f5;
    --table-row-hover-bg: #fafafa;
    --asx-button-bg: #e0e0e0;
    --asx-button-hover-bg: #bdbdbd;
    --asx-button-text: #424242;
    --asx-button-active-bg: #9e9e9e;
    --asx-button-active-text: #fff;
    --sidebar-bg: #e0e0e0;
    --sidebar-link-hover-bg: #bdbdbd;
    --sidebar-text: #424242;
    --sidebar-icon: #9e9e9e;
    --sidebar-header-text: #757575;
    --sticky-footer-bg: #f5f5f5;
    --sticky-footer-border: #bdbdbd;
}

/* Media Queries for Responsiveness */
@media (max-width: 768px) {
    header {
        padding: 10px 15px;
    }

    .header-top-row {
        margin-bottom: 5px;
    }

    #mainTitle {
        font-size: 1.3em;
    }

    .header-action-btn {
        padding: 6px 10px;
        font-size: 0.9em;
    }

    .app-sidebar {
        padding-top: 50px;
    }

    .close-menu-btn {
        top: 10px;
        right: 10px;
        font-size: 1.2em;
    }

    .watchlist-controls-row {
        flex-direction: column;
        gap: 10px;
        padding: 10px 15px;
    }

    .watchlist-group,
    .sort-group {
        width: 100%;
        max-width: none;
    }

    .dropdown-large {
        font-size: 0.95em;
        padding: 8px 12px;
    }

    .asx-code-buttons-container {
        padding: 8px 15px;
        gap: 6px;
    }

    .asx-code-btn {
        padding: 5px 10px;
        font-size: 0.85em;
    }

    .container {
        padding: 15px;
    }

    .share-list-section {
        margin-top: 15px;
    }

    #shareTable {
        display: none; /* Hide table on mobile */
    }

    .mobile-share-cards {
        display: block; /* Show cards on mobile */
    }

    .mobile-card {
        padding: 12px;
        margin-bottom: 12px;
    }

    .mobile-card h3 {
        font-size: 1.1em;
    }

    .mobile-card p {
        font-size: 0.9em;
    }

    .fixed-footer {
        padding: 8px 15px;
    }

    .google-auth-btn {
        padding: 8px 15px;
        font-size: 0.95em;
    }

    #scrollToTopBtn {
        bottom: 70px;
        right: 15px;
        width: 45px;
        height: 45px;
        font-size: 1.3em;
    }

    .modal-content {
        width: 95%;
        padding: 15px;
        max-height: 95vh;
    }

    .modal-header-with-icon {
        margin-bottom: 10px;
        padding-bottom: 8px;
    }

    .modal-header-with-icon h2 {
        font-size: 1.2em;
    }

    .close-button {
        font-size: 1.8em;
    }

    .modal-content label {
        font-size: 0.9em;
    }

    .modal-content input[type="text"],
    .modal-content input[type="number"],
    .modal-content textarea,
    .modal-content select {
        padding: 8px;
        font-size: 0.9em;
    }

    .modal-action-buttons, .form-action-buttons {
        gap: 10px;
        padding-top: 10px;
        margin-top: 10px;
    }

    .modal-action-icon {
        font-size: 1.5em;
        padding: 3px;
    }

    .modal-form-buttons {
        margin-bottom: -15px;
        left: -15px;
        width: calc(100% + 30px);
        padding-left: 15px;
        padding-right: 15px;
    }

    .comments-form-container h3 {
        font-size: 1em;
    }

    .add-section-icon {
        font-size: 1em;
        width: 25px;
        height: 25px;
    }

    .comment-delete-btn {
        width: 25px;
        height: 25px;
        font-size: 0.9em;
    }
}

/* Desktop Specific Adjustments */
@media (min-width: 769px) {
    body.sidebar-active main.container,
    body.sidebar-active header,
    body.sidebar-active footer.fixed-footer {
        margin-left: var(--sidebar-width);
        width: calc(100% - var(--sidebar-width));
    }

    .watchlist-controls-row {
        width: 100%; 
        justify-content: center; 
        flex-direction: row; 
        flex-wrap: nowrap; 
        gap: 20px 40px; 
        padding: 15px 0;
        border-top: 1px solid var(--border-color); 
        border-bottom: 1px solid var(--border-color);
    }
    .watchlist-group,
    .sort-group {
        width: auto; /* Allow content to dictate width */
        justify-content: flex-start; 
        padding: 0;
        flex-basis: auto; /* Reset flex-basis for desktop */
        max-width: unset; /* Reset max-width for desktop */
    }
    .dropdown-large {
        min-width: 180px; /* Restore min-width for desktop */
        width: auto; /* Allow content to dictate width */
    }

    .fixed-footer {
        padding: 15px 20px;
    }

    table {
        display: table;
    }

    .mobile-share-cards {
        display: none;
    }

    #scrollToTopBtn {
        display: none; /* Always hidden on desktop */
    }

    /* Context menu on desktop should follow mouse */
    .context-menu {
        top: var(--mouse-y, 0); /* Use custom properties set by JS */
        left: var(--mouse-x, 0);
    }
}
